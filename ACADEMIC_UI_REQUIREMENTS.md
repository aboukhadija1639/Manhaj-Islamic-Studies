# المتطلبات الكاملة لتنفيذ واجهة المستخدم الأكاديمية

**المؤلف:** Manus AI Agent  
**التاريخ:** 16 يناير 2026  
**الإصدار:** 1.0

---

## 1. ملخص المشروع

### 1.1. الهدف الرئيسي

الهدف من هذا المشروع هو **إعادة هيكلة واجهة المستخدم (UI) لمنصة "منهاج"** لتتوافق مع البنية الأكاديمية الجديدة المعتمدة على البيانات والتي تم إنشاؤها في **طبقة المجال (Domain Layer)**. يجب أن تتحول المنصة من مجموعة مقاييس متفرقة إلى تجربة أكاديمية متكاملة تعكس مسار الطالب الجامعي في كلية العلوم الإسلامية بجامعة الوادي.

### 1.2. الجمهور المستهدف

- **الطلاب:** طلاب كلية العلوم الإسلامية في مرحلتي الليسانس والماستر.
- **الأساتذة:** أساتذة الكلية الذين قد يستخدمون المنصة كمورد تعليمي.
- **الإدارة:** إدارة الكلية لمتابعة البرامج والمناهج.

### 1.3. المبادئ الأساسية للتنفيذ

1.  **بنية تعتمد على البيانات (Data-Driven Architecture):** يجب أن يتم توليد جميع الصفحات والمكونات ديناميكياً من طبقة البيانات (Data Layer) التي سيتم إنشاؤها لاحقاً، باستخدام طبقة المجال (Domain Layer) كوسيط.
2.  **التوجه نحو المكونات (Component-Based):** بناء واجهة المستخدم كمجموعة من المكونات القابلة لإعادة الاستخدام (Reusable Components) لضمان الاتساق وسهولة الصيانة.
3.  **دعم كامل للغة العربية (RTL-First):** يجب أن تكون جميع المكونات والصفحات مصممة بشكل أساسي لدعم الكتابة من اليمين إلى اليسار (RTL) مع مراعاة جماليات التصميم باللغة العربية.
4.  **تصميم سريع الاستجابة (Responsive Design):** يجب أن تعمل المنصة بشكل ممتاز على جميع أحجام الشاشات، من الهواتف المحمولة إلى الشاشات الكبيرة.
5.  **الأداء أولاً (Performance-First):** استخدام تقنيات مثل التحميل الكسول (Lazy Loading) وتقسيم الكود (Code Splitting) لضمان تجربة مستخدم سريعة وسلسة.

---

## 2. المتطلبات الوظيفية (Functional Requirements)

يجب إنشاء أو تعديل الصفحات التالية لتعكس الهيكل الأكاديمي.

### 2.1. صفحة البرامج الأكاديمية (Programs Page)

- **المسار:** `/programs`
- **الوظيفة:** عرض البرامج الأكاديمية المتاحة (ليسانس وماستر).
- **المكونات:**
    - **بطاقة البرنامج (Degree Card):** بطاقة لكل درجة (ليسانس، ماستر) تعرض:
        - الاسم (ليسانس العلوم الإسلامية)
        - المدة (3 سنوات، 6 سداسيات)
        - عدد التخصصات المتاحة
        - أيقونة مميزة
        - رابط إلى صفحة الدرجة (`/programs/:degreeId`)

### 2.2. صفحة الدرجة الأكاديمية (Degree Page)

- **المسار:** `/programs/:degreeId` (مثال: `/programs/licence-islamic-sciences`)
- **الوظيفة:** عرض تفاصيل الدرجة الأكاديمية وجميع التخصصات المتاحة فيها.
- **المكونات:**
    - **رأس الصفحة (Header):** يعرض اسم الدرجة ووصفها.
    - **قائمة التخصصات (Specialties List):** شبكة (Grid) من بطاقات التخصصات.
    - **بطاقة التخصص (Specialty Card):** تعرض:
        - اسم التخصص (علوم القرآن والقراءات)
        - أيقونة ولون مميزين (من طبقة المجال)
        - وصف مختصر
        - رابط إلى صفحة التخصص (`/programs/:degreeId/:specialtyId`)

### 2.3. صفحة التخصص (Specialty Page)

- **المسار:** `/programs/:degreeId/:specialtyId` (مثال: `/programs/licence-islamic-sciences/quran-sciences`)
- **الوظيفة:** عرض الخطة الدراسية الكاملة للتخصص، مقسمة حسب السنوات والسداسيات.
- **المكونات:**
    - **معلومات التخصص:** عرض الأهداف، المخرجات، والمسارات المهنية.
    - **الخطة الدراسية (Curriculum View):**
        - عرض تبويبات للسنوات (السنة الأولى، السنة الثانية، ...).
        - داخل كل سنة، عرض تبويبات للسداسيات (السداسي الأول، السداسي الثاني).
        - داخل كل سداسي، عرض قائمة بالمقاييس.
    - **بطاقة المقياس (Module Card):** تعرض:
        - اسم المقياس ورمزه (UEF-111)
        - نوع المقياس (أساسي، منهجي...)
        - عدد الأرصدة (Credits)
        - رابط إلى صفحة المقياس (`/modules/:moduleId`)

### 2.4. صفحة المقياس (Module Page) - **إعادة هيكلة**

- **المسار:** `/modules/:moduleId` (مثال: `/modules/ulum-al-quran`)
- **الوظيفة:** عرض جميع تفاصيل ومحتويات المقياس. هذه الصفحة موجودة حالياً ولكن يجب إعادة هيكلتها لتكون ديناميكية بالكامل.
- **التعديلات المطلوبة:**
    - **تحميل ديناميكي:** يجب أن تستخدم `useParams` من `react-router-dom` للحصول على `moduleId` وتحميل بيانات المقياس من طبقة المجال.
    - **عرض الوحدات (Units):** عرض قائمة بالوحدات التعليمية للمقياس.
    - **عرض المحتوى (Content):** عند النقر على وحدة، يتم عرض محتوياتها (PDF, Video, Quiz...).
    - **عرض الموارد (Resources):** عرض قائمة بالموارد الإضافية للمقياس.
    - **تتبع التقدم:** التكامل مع `ProgressService` لعرض وتحديث تقدم الطالب.

---

## 3. المتطلبات غير الوظيفية (Non-Functional Requirements)

| الفئة | المتطلب | تفاصيل التنفيذ |
| :--- | :--- | :--- |
| **الأداء** | تحميل سريع للصفحات | - استخدام **Lazy Loading** لجميع الصفحات باستخدام `React.lazy()`.
| | | - تقسيم الكود (Code Splitting) لكل مسار رئيسي. |
| **الوصولية** | التوافق مع WCAG 2.1 AA | - استخدام عناصر HTML الدلالية (Semantic HTML).
| | | - توفير نصوص بديلة للصور (`alt` text).
| | | - ضمان إمكانية التنقل باستخدام لوحة المفاتيح فقط. |
| **تجربة المستخدم** | تصميم متسق وجذاب | - استخدام نظام تصميم (Design System) موحد يعتمد على `TailwindCSS`.
| | | - الالتزام بالألوان والأيقونات المحددة في طبقة المجال. |
| | واجهة باللغة العربية | - جميع النصوص المعروضة للمستخدم يجب أن تكون باللغة العربية.
| | | - استخدام `dir="rtl"` وتصميم يدعم RTL بشكل كامل. |
| **الكود** | كود نظيف وقابل للصيانة | - اتباع مبادئ **SOLID**.
| | | - كتابة تعليقات واضحة (باللغة الإنجليزية) عند الحاجة.
| | | - استخدام `ESLint` و `Prettier` لضمان تناسق الكود. |

---

## 4. تدفق البيانات وإدارة الحالة

### 4.1. طبقة البيانات (Data Layer) - **مستقبلية**

سيتم إنشاء طبقة بيانات منفصلة تحتوي على جميع البيانات الأكاديمية الفعلية في ملفات `JSON` أو `TypeScript`. ستكون هذه الطبقة هي **مصدر الحقيقة الوحيد (Single Source of Truth)**.

### 4.2. طبقة المجال (Domain Layer) - **موجودة**

تعمل كوسيط بين البيانات وواجهة المستخدم، وتحتوي على منطق الأعمال (Business Logic).

### 4.3. طبقة الواجهة (UI Layer) - **المطلوب تنفيذها**

- يجب أن تستخدم الصفحات **الخدمات (Services)** من طبقة المجال لجلب البيانات ومعالجتها.
- **مثال:** صفحة التخصص ستستخدم `SpecialtyService` و `ModuleService` لجلب وعرض بياناتها.

### 4.4. إدارة الحالة (State Management)

- **الحالة العامة (Global State):** استخدام `Zustand` أو `React Context` للحالات العامة مثل معلومات المستخدم الحالي، اللغة، والمظهر (Theme).
- **حالة الخادم (Server State):** استخدام `React Query` (أو `TanStack Query`) لإدارة جلب البيانات من طبقة البيانات، مع الاستفادة من ميزات التخزين المؤقت (Caching) وإعادة الجلب التلقائي (Automatic Refetching).

---

## 5. معالجة الأخطاء والحالات الطرفية

يجب تصميم مكونات للتعامل مع الحالات التالية بشكل أنيق:

- **حالة التحميل (Loading State):** عرض مؤشرات تحميل (Skeletons or Spinners) أثناء جلب البيانات.
- **حالة الخطأ (Error State):** عرض رسالة خطأ واضحة مع زر لإعادة المحاولة عند فشل جلب البيانات.
- **الحالة الفارغة (Empty State):** عرض رسالة مناسبة عندما لا توجد بيانات لعرضها (مثال: تخصص بدون مقاييس).
- **صفحة 404 (Not Found):** عرض صفحة "غير موجود" مخصصة عند محاولة الوصول إلى مسار غير صالح (مثال: مقياس بمعرف خاطئ).
